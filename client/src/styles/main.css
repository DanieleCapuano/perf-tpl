/**
 * Main CSS file with CSS Layers and @scope
 * 
 * Using CSS Layers for better specificity management:
 * 1. reset - Base resets
 * 2. theme - Design tokens and variables
 * 3. layout - Layout components
 * 4. components - UI components
 * 5. utilities - Utility classes
 * 6. overrides - Specific overrides
 */

/* Define layer order (lowest to highest priority) */
@layer reset, theme, layout, components, utilities, overrides;

/* ============================================
   RESET LAYER
   ============================================ */
@layer reset {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    min-height: 100vh;
    line-height: 1.5;
  }

  img,
  picture,
  video,
  canvas,
  svg {
    display: block;
    max-width: 100%;
  }

  input,
  button,
  textarea,
  select {
    font: inherit;
  }

  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    overflow-wrap: break-word;
  }
}

/* ============================================
   THEME LAYER - CSS Variables
   ============================================ */
@layer theme {
  :root {
    /* Colors */
    --color-primary: #667eea;
    --color-primary-dark: #764ba2;
    --color-secondary: #f093fb;
    --color-accent: #4facfe;
    
    --color-text: #1a1a1a;
    --color-text-light: #666666;
    --color-text-lighter: #999999;
    
    --color-bg: #ffffff;
    --color-bg-alt: #f5f5f5;
    --color-bg-dark: #1a1a1a;
    
    --color-border: #e0e0e0;
    --color-border-light: #f0f0f0;
    
    --color-success: #4caf50;
    --color-warning: #ff9800;
    --color-error: #f44336;
    --color-info: #2196f3;
    
    /* Typography */
    --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
      sans-serif;
    --font-mono: 'Fira Code', 'Consolas', 'Monaco', 'Courier New', monospace;
    
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-base: 1rem;
    --font-size-lg: 1.125rem;
    --font-size-xl: 1.25rem;
    --font-size-2xl: 1.5rem;
    --font-size-3xl: 1.875rem;
    --font-size-4xl: 2.25rem;
    
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    
    --line-height-tight: 1.25;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.75;
    
    /* Spacing */
    --space-xs: 0.25rem;
    --space-sm: 0.5rem;
    --space-md: 1rem;
    --space-lg: 1.5rem;
    --space-xl: 2rem;
    --space-2xl: 3rem;
    --space-3xl: 4rem;
    
    /* Border radius */
    --radius-sm: 0.25rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;
    --radius-xl: 1rem;
    --radius-full: 9999px;
    
    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    
    /* Transitions */
    --transition-fast: 150ms ease-in-out;
    --transition-base: 250ms ease-in-out;
    --transition-slow: 350ms ease-in-out;
    
    /* Z-index scale */
    --z-dropdown: 1000;
    --z-sticky: 1020;
    --z-fixed: 1030;
    --z-modal-backdrop: 1040;
    --z-modal: 1050;
    --z-popover: 1060;
    --z-tooltip: 1070;
  }
  
  /* Dark mode support */
  @media (prefers-color-scheme: dark) {
    :root {
      --color-text: #ffffff;
      --color-text-light: #cccccc;
      --color-text-lighter: #999999;
      
      --color-bg: #1a1a1a;
      --color-bg-alt: #2a2a2a;
      --color-bg-dark: #0a0a0a;
      
      --color-border: #3a3a3a;
      --color-border-light: #2a2a2a;
    }
  }
}

/* ============================================
   LAYOUT LAYER
   ============================================ */
@layer layout {
  body {
    font-family: var(--font-sans);
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
    color: var(--color-text);
    background-color: var(--color-bg);
  }
  
  /* Container */
  .container {
    width: 100%;
    max-width: 1200px;
    margin-inline: auto;
    padding-inline: var(--space-lg);
  }
  
  .container-fluid {
    width: 100%;
    padding-inline: var(--space-lg);
  }
  
  /* Grid system */
  .grid {
    display: grid;
    gap: var(--space-md);
  }
  
  .grid-cols-2 {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .grid-cols-3 {
    grid-template-columns: repeat(3, 1fr);
  }
  
  .grid-cols-4 {
    grid-template-columns: repeat(4, 1fr);
  }
  
  @media (max-width: 768px) {
    .grid-cols-2,
    .grid-cols-3,
    .grid-cols-4 {
      grid-template-columns: 1fr;
    }
  }
  
  /* Flex utilities */
  .flex {
    display: flex;
  }
  
  .flex-col {
    flex-direction: column;
  }
  
  .items-center {
    align-items: center;
  }
  
  .justify-center {
    justify-content: center;
  }
  
  .justify-between {
    justify-content: space-between;
  }
  
  .gap-sm {
    gap: var(--space-sm);
  }
  
  .gap-md {
    gap: var(--space-md);
  }
  
  .gap-lg {
    gap: var(--space-lg);
  }
}

/* ============================================
   COMPONENTS LAYER with @scope
   ============================================ */
@layer components {
  /* Button component with @scope */
  @scope (.btn) {
    :scope {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
      padding: var(--space-sm) var(--space-lg);
      font-weight: var(--font-weight-medium);
      border: none;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-base);
      text-decoration: none;
      user-select: none;
    }
    
    :scope:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }
    
    :scope:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    /* Button variants */
    .primary {
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
      color: white;
    }
    
    .secondary {
      background: var(--color-bg-alt);
      color: var(--color-text);
    }
    
    .outline {
      background: transparent;
      border: 2px solid var(--color-border);
      color: var(--color-text);
    }
  }
  
  /* Card component with @scope */
  @scope (.card) {
    :scope {
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      box-shadow: var(--shadow-sm);
      transition: box-shadow var(--transition-base);
    }
    
    :scope:hover {
      box-shadow: var(--shadow-md);
    }
    
    .header {
      margin-bottom: var(--space-md);
      padding-bottom: var(--space-md);
      border-bottom: 1px solid var(--color-border-light);
    }
    
    .title {
      font-size: var(--font-size-xl);
      font-weight: var(--font-weight-semibold);
      margin-bottom: var(--space-xs);
    }
    
    .body {
      color: var(--color-text-light);
    }
    
    .footer {
      margin-top: var(--space-md);
      padding-top: var(--space-md);
      border-top: 1px solid var(--color-border-light);
    }
  }
  
  /* Alert component with @scope */
  @scope (.alert) {
    :scope {
      padding: var(--space-md);
      border-radius: var(--radius-md);
      border-left: 4px solid;
    }
    
    .success {
      background: color-mix(in srgb, var(--color-success) 10%, transparent);
      border-color: var(--color-success);
      color: var(--color-success);
    }
    
    .warning {
      background: color-mix(in srgb, var(--color-warning) 10%, transparent);
      border-color: var(--color-warning);
      color: var(--color-warning);
    }
    
    .error {
      background: color-mix(in srgb, var(--color-error) 10%, transparent);
      border-color: var(--color-error);
      color: var(--color-error);
    }
    
    .info {
      background: color-mix(in srgb, var(--color-info) 10%, transparent);
      border-color: var(--color-info);
      color: var(--color-info);
    }
  }
}

/* ============================================
   UTILITIES LAYER
   ============================================ */
@layer utilities {
  /* Text utilities */
  .text-center {
    text-align: center;
  }
  
  .text-left {
    text-align: left;
  }
  
  .text-right {
    text-align: right;
  }
  
  .font-bold {
    font-weight: var(--font-weight-bold);
  }
  
  .font-semibold {
    font-weight: var(--font-weight-semibold);
  }
  
  /* Spacing utilities */
  .m-0 { margin: 0; }
  .mt-1 { margin-top: var(--space-xs); }
  .mt-2 { margin-top: var(--space-sm); }
  .mt-3 { margin-top: var(--space-md); }
  .mt-4 { margin-top: var(--space-lg); }
  
  .mb-1 { margin-bottom: var(--space-xs); }
  .mb-2 { margin-bottom: var(--space-sm); }
  .mb-3 { margin-bottom: var(--space-md); }
  .mb-4 { margin-bottom: var(--space-lg); }
  
  .p-0 { padding: 0; }
  .p-1 { padding: var(--space-xs); }
  .p-2 { padding: var(--space-sm); }
  .p-3 { padding: var(--space-md); }
  .p-4 { padding: var(--space-lg); }
  
  /* Display utilities */
  .hidden {
    display: none;
  }
  
  .block {
    display: block;
  }
  
  .inline-block {
    display: inline-block;
  }
  
  /* Performance optimization utilities */
  .will-change-transform {
    will-change: transform;
  }
  
  .contain-layout {
    contain: layout;
  }
  
  .contain-paint {
    contain: paint;
  }
  
  .contain-strict {
    contain: strict;
  }
}

/* ============================================
   OVERRIDES LAYER
   ============================================ */
@layer overrides {
  /* Critical overrides only */
  .force-hidden {
    display: none !important;
  }
}

/* ============================================
   Print styles (outside layers)
   ============================================ */
@media print {
  body {
    background: white;
    color: black;
  }
  
  .no-print {
    display: none;
  }
}
