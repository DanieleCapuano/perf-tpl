const g=[{"revision":"c65f604540e83a5c069405dffe7f58e6","url":"offline.html"},{"revision":"1c33d1e333a20a23d60e409c4739e678","url":"index.html"},{"revision":"9d91036f53b4b705ba6eb251cfff2180","url":"favicon.png"},{"revision":"4fa566d346f1308e928ab87495008945","url":"workers/shared-buffer-worker.B1HcM5j6.js"},{"revision":"ccf260256474e6ac039f61e52c80ff59","url":"workers/data-worker.AY7KLkIl.js"},{"revision":"64b9b65151f8f5353b42f5c04408fa65","url":"workers/compute-worker.CgnHtGwq.js"},{"revision":"68b329da9893e34099c7d8ad5cb9c940","url":"js/wasm-vendor.l0sNRNKZ.js"},{"revision":"9059ba1c6e93299d3b4cda9112e497ba","url":"js/react-vendor.C6WxKkic.js"},{"revision":"7105f504d0b8e600a1d1ce0b5480f657","url":"js/index.DAOhQU30.js"},{"revision":"ba4d46086e196605ab6277c57e378d44","url":"css/index.Txk282u5.css"},{"revision":"9d91036f53b4b705ba6eb251cfff2180","url":"favicon.png"},{"revision":"576f736b532c675f849d0d83cc4d5458","url":"manifest.json"}],c="dev-1772204373342",o=`static-${c}`,i=`dynamic-${c}`,f=`images-${c}`,p=["/","/index.html","/manifest.json","/favicon.png"],d={images:50,dynamic:100};self.addEventListener("install",t=>{console.log("[SW] Installing service worker..."),console.log("[SW] Precache manifest:",g),t.waitUntil(caches.open(o).then(n=>(console.log("[SW] Caching static assets"),n.addAll(p))).catch(n=>{console.error("[SW] Failed to cache static assets:",n)})),self.skipWaiting()});self.addEventListener("activate",t=>{console.log("[SW] Activating service worker..."),t.waitUntil(caches.keys().then(n=>Promise.all(n.filter(e=>e.startsWith("static-")||e.startsWith("dynamic-")||e.startsWith("images-")).filter(e=>e!==o&&e!==i&&e!==f).map(e=>(console.log("[SW] Deleting old cache:",e),caches.delete(e))))).then(()=>(console.log("[SW] Service worker activated"),self.clients.claim())))});self.addEventListener("fetch",t=>{const{request:n}=t,e=new URL(n.url);if(e.origin===location.origin){if(e.pathname.startsWith("/api/")){t.respondWith(l(n,i));return}if(n.destination==="image"){t.respondWith(w(n,f));return}if(n.destination==="script"||n.destination==="style"||n.destination==="font"||n.destination==="document"){t.respondWith(u(n,o));return}t.respondWith(l(n,i))}});async function u(t,n){try{const e=await caches.match(t);if(e)return e;const a=await fetch(t);return a&&a.status===200&&(await caches.open(n)).put(t,a.clone()),a}catch(e){console.error("[SW] Cache-first failed:",e);const a=await caches.match("/offline.html");return a||new Response("Offline",{status:503})}}async function l(t,n){try{const e=await fetch(t);return e&&e.status===200&&((await caches.open(n)).put(t,e.clone()),h(n,d.dynamic)),e}catch(e){console.log("[SW] Network failed, trying cache:",e.message);const a=await caches.match(t);return a||new Response("Offline",{status:503})}}async function w(t,n){const e=await caches.match(t),a=fetch(t).then(async s=>(s&&s.status===200&&((await caches.open(n)).put(t,s.clone()),h(n,d.images)),s)).catch(s=>(console.log("[SW] Fetch failed:",s.message),new Response("Offline",{status:503})));return e||a}async function h(t,n){const e=await caches.open(t),a=await e.keys();if(a.length>n){const s=a.slice(0,a.length-n);await Promise.all(s.map(r=>e.delete(r)))}}self.addEventListener("sync",t=>{console.log("[SW] Background sync:",t.tag),t.tag==="sync-data"&&t.waitUntil(y())});async function y(){try{return console.log("[SW] Syncing offline data..."),Promise.resolve()}catch(t){throw console.error("[SW] Sync failed:",t),t}}self.addEventListener("push",t=>{const n={body:t.data?t.data.text():"New notification",icon:"/icon-192x192.png",badge:"/badge-72x72.png",data:{dateOfArrival:Date.now(),primaryKey:1}};t.waitUntil(self.registration.showNotification("Performance App",n))});self.addEventListener("notificationclick",t=>{t.notification.close(),t.waitUntil(self.clients.openWindow("/"))});self.addEventListener("message",t=>{console.log("[SW] Message received:",t.data),t.data&&t.data.type==="SKIP_WAITING"&&self.skipWaiting(),t.data&&t.data.type==="CLEAR_CACHE"&&t.waitUntil(caches.keys().then(n=>Promise.all(n.map(e=>caches.delete(e)))))});
